# 2.9 UXMI States Architecture
## 7 Components Ã— 7 States Visualization (CR-005 SACRED)

**Node ID:** 2.9
**Category:** Frontend
**CR Impact:** CR-005 (UXMI 7-States) - SACRED
**Status:** CREATED
**Version:** 1.0
**Date:** 2026-01-27

---

## Purpose

This document defines the complete UXMI (UX Micro-Interactions) state matrix that is CONSTITUTIONALLY REQUIRED by CR-005. All interactive UI components MUST implement the 7-state standard.

---

## CR-005 Definition

> **CR-005: UXMI 7-States**
> All interactive UI components must implement a 7-state micro-interaction standard:
> 1. **idle** - Default resting state
> 2. **hover** - Mouse over (150ms transition)
> 3. **active** - Pressed/engaged (100ms transition)
> 4. **loading** - Async operation in progress
> 5. **success** - Operation completed successfully
> 6. **error** - Operation failed
> 7. **disabled** - Interaction prevented

---

## State Matrix

```mermaid
graph TD
    subgraph MATRIX["7Ã—7 UXMI Matrix"]
        direction TB
        
        subgraph COMPONENTS["7 UXMI Components"]
            C1[Button]
            C2[Input]
            C3[Toast]
            C4[Tooltip]
            C5[Spinner]
            C6[ProgressBar]
            C7[ErrorDisplay]
        end

        subgraph STATES["7 States"]
            S1[idle]
            S2[hover]
            S3[active]
            S4[loading]
            S5[success]
            S6[error]
            S7[disabled]
        end
    end
```

---

## Component-State Applicability

| Component | idle | hover | active | loading | success | error | disabled |
|-----------|:----:|:-----:|:------:|:-------:|:-------:|:-----:|:--------:|
| **Button** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **Input** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **Toast** | - | - | - | - | âœ… | âœ… | - |
| **Tooltip** | âœ… | âœ… | - | - | - | - | - |
| **Spinner** | - | - | - | âœ… | - | - | - |
| **ProgressBar** | âœ… | - | - | âœ… | âœ… | âœ… | - |
| **ErrorDisplay** | - | - | - | - | - | âœ… | - |

---

## Button State Machine

```mermaid
stateDiagram-v2
    [*] --> idle: Mount

    idle --> hover: mouseEnter
    hover --> idle: mouseLeave
    hover --> active: mouseDown
    active --> hover: mouseUp
    active --> loading: async action
    loading --> success: resolved
    loading --> error: rejected
    success --> idle: timeout (2s)
    error --> idle: timeout (3s)

    idle --> disabled: prop.disabled=true
    disabled --> idle: prop.disabled=false

    note right of hover: 150ms transition
    note right of active: 100ms transition
```

---

## Input State Machine

```mermaid
stateDiagram-v2
    [*] --> idle: Mount

    idle --> hover: mouseEnter
    hover --> idle: mouseLeave
    hover --> active: focus
    idle --> active: focus
    active --> idle: blur
    active --> loading: async validation
    loading --> success: valid
    loading --> error: invalid
    success --> active: continue editing
    error --> active: continue editing

    idle --> disabled: prop.disabled=true
    disabled --> idle: prop.disabled=false

    note right of hover: 150ms transition
    note right of active: focus ring
```

---

## Timing Constants (SACRED)

| Constant | Value | Usage |
|----------|-------|-------|
| `HOVER_TRANSITION` | 150ms | Button, Input hover animations |
| `ACTIVE_TRANSITION` | 100ms | Button, Input active/pressed |
| `TOOLTIP_DELAY` | 300ms | Tooltip appearance delay |
| `TOAST_DURATION` | 5000ms | Toast auto-dismiss |
| `SUCCESS_TIMEOUT` | 2000ms | Success state auto-clear |
| `ERROR_TIMEOUT` | 3000ms | Error state auto-clear |

---

## Visual Specifications

### Button States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ State      â”‚ Background    â”‚ Border      â”‚ Text        â”‚ Cursor â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ idle       â”‚ blue-600      â”‚ transparent â”‚ white       â”‚ pointerâ”‚
â”‚ hover      â”‚ blue-700      â”‚ transparent â”‚ white       â”‚ pointerâ”‚
â”‚ active     â”‚ blue-800      â”‚ transparent â”‚ white       â”‚ pointerâ”‚
â”‚ loading    â”‚ blue-600/50   â”‚ transparent â”‚ hidden      â”‚ wait   â”‚
â”‚ success    â”‚ green-600     â”‚ transparent â”‚ white       â”‚ defaultâ”‚
â”‚ error      â”‚ red-600       â”‚ transparent â”‚ white       â”‚ defaultâ”‚
â”‚ disabled   â”‚ gray-300      â”‚ transparent â”‚ gray-500    â”‚ not-allowedâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Input States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ State      â”‚ Background    â”‚ Border      â”‚ Ring        â”‚ Cursor â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ idle       â”‚ white         â”‚ gray-300    â”‚ none        â”‚ text   â”‚
â”‚ hover      â”‚ white         â”‚ gray-400    â”‚ none        â”‚ text   â”‚
â”‚ active     â”‚ white         â”‚ blue-500    â”‚ blue-200/50 â”‚ text   â”‚
â”‚ loading    â”‚ gray-50       â”‚ gray-300    â”‚ none        â”‚ wait   â”‚
â”‚ success    â”‚ white         â”‚ green-500   â”‚ green-200/50â”‚ text   â”‚
â”‚ error      â”‚ white         â”‚ red-500     â”‚ red-200/50  â”‚ text   â”‚
â”‚ disabled   â”‚ gray-100      â”‚ gray-200    â”‚ none        â”‚ not-allowedâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Toast Variants

```mermaid
graph LR
    subgraph TOASTS["Toast Types"]
        T1["ğŸŸ¢ success\ngreen border\nâœ“ icon"]
        T2["ğŸ”´ error\nred border\nâœ— icon"]
        T3["ğŸŸ¡ warning\nyellow border\nâš  icon"]
        T4["ğŸ”µ info\nblue border\nâ„¹ icon"]
    end
```

---

## CSS Implementation

```css
/* CR-005 Timing Constants */
:root {
  --uxmi-hover-transition: 150ms;
  --uxmi-active-transition: 100ms;
  --uxmi-tooltip-delay: 300ms;
  --uxmi-toast-duration: 5000ms;
}

/* Button State Transitions */
.uxmi-button {
  transition: 
    background-color var(--uxmi-hover-transition) ease,
    transform var(--uxmi-active-transition) ease;
}

.uxmi-button:hover {
  background-color: var(--color-blue-700);
}

.uxmi-button:active {
  background-color: var(--color-blue-800);
  transform: scale(0.98);
}

/* Input Focus Ring */
.uxmi-input:focus {
  outline: none;
  border-color: var(--color-blue-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
}
```

---

## Component Files

| Component | File | Lines | States Implemented |
|-----------|------|-------|-------------------|
| Button | `src/client/components/uxmi/Button.tsx` | 89 | All 7 |
| Input | `src/client/components/uxmi/Input.tsx` | 76 | All 7 |
| ErrorDisplay | `src/client/components/uxmi/ErrorDisplay.tsx` | 45 | error only |
| Toast | `src/client/components/uxmi/Toast.tsx` | 58 | success, error, warning, info |
| Tooltip | `src/client/components/uxmi/Tooltip.tsx` | 42 | idle, hover |
| Spinner | `src/client/components/uxmi/Spinner.tsx` | 34 | loading only |
| ProgressBar | `src/client/components/uxmi/ProgressBar.tsx` | 38 | idle, loading, success, error |

---

## Accessibility Requirements

| Requirement | Implementation |
|-------------|----------------|
| Focus visible | All focusable elements have visible focus ring |
| Keyboard navigation | Tab order, Enter/Space activation |
| Screen reader | ARIA labels for states |
| Motion reduction | Respect prefers-reduced-motion |
| Color contrast | WCAG AA minimum (4.5:1) |

---

## Testing Requirements

Each UXMI component must have tests for:
1. All applicable states render correctly
2. State transitions occur with correct timing
3. Keyboard interactions work
4. ARIA attributes present
5. Disabled state prevents interaction

---

*Document ID: FLOW-2.9-UXMI | Layer 2 Architecture | MCI Project | CR-005 SACRED*
