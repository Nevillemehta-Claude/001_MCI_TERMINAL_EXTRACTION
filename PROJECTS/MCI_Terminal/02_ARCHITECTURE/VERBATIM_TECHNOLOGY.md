# VERBATIM TECHNOLOGY STACK - COMPLETE EXTRACTION

**Source:** b8937bc2-ac10-4287-8ced-af96ac5f6f0b.jsonl
**Extraction Date:** 2026-01-25

This document contains all technology stack references from the MCI session.

**Primary Stack:**
- Runtime: Bun
- Backend: Hono
- Frontend: React 18
- State: Zustand
- Styling: Tailwind CSS
- Build: Vite
- Language: TypeScript

---

## ALL TECHNOLOGY REFERENCES


### TECH REF 1

LTT tab looks complete with:
- 49 Total Nodes, 34 Complete, 13 Architecture Gap
- 5 Layers with scores
- 69% Overall Score

---

### TECH REF 2

**Current MCI Project State:**
- HTML verification: COMPLETE
- Q&A entries: 16 verified (Q1-Q16)
- LTT: 49 nodes, 34 complete, 69% score
- Autonomousâ†’Supervised purge: COMPLETE (verified in session 02)

---

### TECH REF 3

Would you like me to read the full file systematically - going through every line in small batches as you originally requested? That approach would take longer but would ensure nothing is missed.

---

### TECH REF 4

**Batch 16 Summary:**
- L377-381: Checking UXMI implementation
- **L383: Context compaction**
- L384: File relevance assessment provided
- **L387: User: "YES AND THEN WILL YOU UPDATE THE HTML... MIRRORING EVERY FOLDER AND FILE... HOW WILL THIS BE MAINTAINED ONGOING?"**
- L390-395: Files deleted, confirmed, updating HTML Tree

---

### TECH REF 5

**Batch 30 Summary:**
- L726-732: Reading React components and stores
- **L734: Context compaction**
- L736: Claude: "Continuing comprehensive code audit - examined 4 files"
- L737-750: Reading server routes, client stores, App structure

---

### TECH REF 6

**Batch 31 Summary:**
- L751-754: Reading Zustand stores and components
- L756: Claude: "Excellent progress - examining UXMI and phase components"
- L757-774: Reading Input, Spinner, ProgressBar, ErrorDisplay, phase components

---

### TECH REF 7

Layer 1: Constitutional Foundation    â†’ 6/6 COMPLETE (100%)
Layer 2: Architecture Documentation   â†’ 0% - CRITICAL GAP âš ï¸
Layer 3: Quality Gates                â†’ 6/6 PASSED (100%)
Layer 4A: Development Lifecycle       â†’ 13/14 COMPLETE (93%)
Layer 5: Supervised Execution Pillars â†’ 5 PILLARS ACTIVE
```

---

### TECH REF 8

**2. 5-Layer LTT Structure with Health Scorecard:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š LIFECYCLE TRACEABILITY TREE - HEALTH SCORECARD              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Total Nodes: 49    â”‚  Complete: 34    â”‚  Architecture Gap: 13  â”‚
â”‚  Minor Fixes: 2     â”‚  Overall: 69%    â”‚  Layers: 5             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

### TECH REF 9

**Layer 2 shows 0% - CRITICAL GAP** (line 3578). The HTML correctly identifies that:
- **13 Architecture Nodes are NOT documented**
- Only a sample flowchart exists
- The full Backend/Frontend flowcharts need to be created

---

### TECH REF 10

| Component | Status |
|-----------|--------|
| LTT 5-Layer Structure | âœ… COMPLETE |
| Present/Ideal State Tabs | âœ… COMPLETE |
| Health Scorecard | âœ… COMPLETE |
| 49 Nodes with Status | âœ… COMPLETE |
| Sample Auth Flowchart | âœ… COMPLETE |
| **Full Backend Flowcharts** | âŒ **GAP (0%)** |
| **Full Frontend Flowcharts** | âŒ **GAP (0%)** |

---

### TECH REF 11

The HTML correctly identifies Layer 2 (Architecture Documentation) as an incomplete work item with **0/13 nodes** remaining. It's visually flagged in red and labeled "CRITICAL GAP."

---

### TECH REF 12

## DIAGRAM 3: ENGINE/COCKPIT RELATIONSHIP TABLE
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CIA-SIE-PURE (Engine)    â”‚    MCI (Cockpit)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Python/FastAPI           â”‚    TypeScript/React        â”‚
â”‚  Executes trades          â”‚    Monitors & Ignites      â”‚
â”‚  Backend system           â”‚    Frontend dashboard      â”‚
â”‚  DOES the trading         â”‚    DOES NOT trade          â”‚
â”‚  Lives separately         â”‚    Connects via API        â”‚
â”‚  Runs 24/7 when active    â”‚    Human interaction point â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

### TECH REF 13

## DIAGRAM 8: LTT HEALTH SCORECARD
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š LIFECYCLE TRACEABILITY TREE - HEALTH SCORECARD              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Total Nodes    Complete    Architecture Gap    Minor Fixes    â”‚
â”‚      49            34              13                2          â”‚
â”‚    (Green)       (Green)         (Red)           (Orange)       â”‚
â”‚                                                                 â”‚
â”‚   Overall Score: 69%          Layers: 5                         â”‚
â”‚       (Blue)                  (Purple)                          â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LAYER 1: Constitutional Foundation    â†’ 6/6 COMPLETE (100%)    â”‚
â”‚  LAYER 2: Architecture Documentation   â†’ 0/13 (CRITICAL GAP)    â”‚
â”‚  LAYER 3

---

### TECH REF 14

| # | Diagram | Type |
|---|---------|------|
| **BACKEND (5)** | | |
| 2.1 | Authentication Sequence | Sequence Diagram |
| 2.2 | Ignition Sequence | Sequence Diagram |
| 2.3 | Telemetry Pipeline | Flowchart |
| 2.4 | Shutdown Sequence (CR-002) | Sequence Diagram |
| 2.5 | Backend State Machine | State Diagram |
| **FRONTEND (4)** | | |
| 2.6 | Component Hierarchy | Tree Diagram |
| 2.7 | State Management Flow | Flowchart |
| 2.8 | Phase Progression | Flow Diagram |
| 2.9 | User Interaction Flow | Flowchart |
| **INTEGRATION (4)** | | |
| 2.10 | API Contract | Endpoint Spec |
| 2.11 | WebSocket Events | Event Schema |
| 2.12 | Error Propagation (CR-003) | Flow Diagram |
| 2.13 | Data Flow Lifecycle | DFD |

---

### TECH REF 15

### PART 1: LIFECYCLE TRACEABILITY TREE (LTT) DESIGN
- **49 nodes** across 5 layers with full tree structure
- Complete **Present State vs Gold State** matrix
- **Health Scorecard** (69% complete, Layer 2 = 0% GAP)
- Full **Mermaid diagram** with color-coded status

---

### TECH REF 16

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TELEMETRY PIPELINE DIAGRAM                                  â”‚
â”‚                              PHASE 3: REAL-TIME DATA FLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        ğŸš€ CIA-SIE-PURE (The Engine)                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚  â”‚  Positions  â”‚  â”‚   Orders    â”‚  â”‚    P&L      â”‚  â”‚   Health    â”‚              â”‚  â”‚
â”‚  â”‚  â”‚    Data     â”‚  â”‚    Data     â”‚  â”‚    Data     â”‚  â”‚   Metrics   â”‚              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      

---

### TECH REF 17

### 2.1.4 SHUTDOWN SEQUENCE (Node 2.4) - CR-002 COMPLIANCE

---

### TECH REF 18

### 2.3.2 ERROR PROPAGATION FLOW (Node 2.12) - CR-003 COMPLIANCE

---

### TECH REF 19

| Section | Diagrams |
|---------|----------|
| **PART 1: LTT Design** | 1.1 Node Inventory (49 nodes), 1.2 Tree Structure, 1.3 Health Scorecard |
| **PART 2A: Backend** | 2.1 Auth Sequence, 2.2 Ignition, 2.3 Telemetry Pipeline, 2.4 Shutdown (CR-002), 2.5 State Machine |
| **PART 2B: Frontend** | 2.6 Component Hierarchy, 2.7 State Management, 2.8 Phase Progression, 2.9 User Interaction (CR-005) |
| **PART 2C: Integration** | 2.10 API Contract, 2.11 WebSocket Events, 2.12 Error Propagation (CR-003), 2.13 Data Flow Lifecycle |

---

### TECH REF 20

### Features
- All diagrams preserved in exact ASCII format using `<pre class="diagram">` tags
- Collapsible sections (click to expand/collapse)
- CR highlights marked in dark red
- Category badges (LTT, BACKEND, FRONTEND, INTEGRATION)
- Stats bar showing: 16 Diagrams, 49 Nodes, 5 Layers, 5 CRs

---

### TECH REF 21

```
04_IMPLEMENTATION/mci/docs/architecture/
â”œâ”€â”€ README.md                    (Architecture Root - Node 2.0)
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ 01_authentication.md     (Node 2.1)
â”‚   â”œâ”€â”€ 02_ignition.md           (Node 2.2)
â”‚   â”œâ”€â”€ 03_telemetry.md          (Node 2.3)
â”‚   â”œâ”€â”€ 04_shutdown.md           (Node 2.4)
â”‚   â””â”€â”€ 05_state_machine.md      (Node 2.5)
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ 06_component_hierarchy.md (Node 2.6)
â”‚   â”œâ”€â”€ 07_state_management.md    (Node 2.7)
â”‚   â”œâ”€â”€ 08_phase_progression.md   (Node 2.8)
â”‚   â””â”€â”€ 09_user_interaction.md    (Node 2.9)
â””â”€â”€ integration/
    â”œâ”€â”€ 10_api_contract.md        (Node 2.10)
    â”œâ”€â”€ 11_websocket_events.md    (Node 2.11)
    â”œâ”€â”€ 12_error_propagation.md   (Node 2.12)
    â””â”€â”€ 13_data_flow.md           (Node 2.13)
```

---

### TECH REF 22

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BUILD ORDER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   STEP 1: BACKEND (5 docs)                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                       â”‚
â”‚   â€¢ Defines data structures                                     â”‚
â”‚   â€¢ Defines API endpoints                                       â”‚
â”‚   â€¢ Defines state transitions                                   â”‚
â”‚   â€¢ Frontend depends on these                                   â”‚
â”‚                                                                  â”‚
â”‚   STEP 2: INTEGRATION (4 docs)                                  â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                  â”‚
â”‚   â€¢ API contracts (what backend exposes)                        â”‚
â”‚   â€¢ WebSocket events (real-time protoco

---

### TECH REF 23

Excellent question. I missed a critical step. Here's the **CORRECT** sequence:

---

### TECH REF 24

```bash
# Start Development
cd /Users/nevillemehta/Downloads/PROJECTS/01_MCI/04_IMPLEMENTATION/mci
bun install
bun run dev      # Frontend
bun run server   # Backend

---

### TECH REF 25

## HONEST ASSESSMENT: BEST TOOL FOR ARCHITECTURE FLOWCHARTS

---

### TECH REF 26

| Icon | Tool | Use For |
|------|------|---------|
| Arrow | Select | Moving objects |
| Hand | Pan | Navigating canvas |
| Marker | Draw | Freehand drawing |
| Shapes | **Shapes** | Flowchart boxes |
| Connector | **Lines** | Connecting boxes |
| Text | Text | Labels |
| Sticky | Sticky notes | Comments |
| Stamp | Stamps | Reactions |

---

### TECH REF 27

### Flowchart Inventory:
1. 2.1 Authentication Sequence (CR-001, CR-004)
2. 2.2 Ignition Sequence
3. 2.3 Telemetry Pipeline
4. 2.4 Shutdown Sequence (CR-002)
5. 2.5 Backend State Machine
6. 2.6 Component Hierarchy
7. 2.7 State Management Flow
8. 2.8 Phase Progression Flow
9. 2.9 User Interaction Flow (CR-005)
10. 2.10 API Contract
11. 2.11 WebSocket Events
12. 2.12 Error Propagation (CR-003)
13. 2.13 Data Flow Lifecycle

---

### TECH REF 28

3. **Technology:** React, TypeScript, Zustand, Hono/Bun, Tailwind

---

### TECH REF 29

**4-Phase Action Plan:**
- Phase 1 (Immediate): Sync Tab 6/7, cosmetic fixes, remove unused CSS, implement JS
- Phase 2 (Short-term): Create 4 Frontend + 4 Integration Flowcharts, complete Tab 3
- Phase 3 (Medium-term): Consolidate tabs 8â†’5, cross-reference linking, LocalStorage
- Phase 4 (Long-term): Maintain LTT, version control, consider React migration

---

### TECH REF 30

**Critical Gap Identified:**
- Layer 2 Architecture at 0% despite diagrams existing in Tab 7
- Missing 13 nodes: Backend Flowcharts (5), Frontend Flowcharts (4), Integration Flowcharts (4)
- Root cause: Synchronization issue between Tab 6 (LTT) and Tab 7 (Schematics)

---

### TECH REF 31

**Folder Structure (Key folders):**
- 00_MASTER_DOCUMENTS: 8 files (governance, standards)
- 01_SOURCE_DOCUMENTS: 5 files (genesis, addendums)
- 02_SPECIFICATIONS: 5 files (master spec, UI/UX)
- 03_ARCHITECTURE: 1 file (C4 Model)
- 04_IMPLEMENTATION: 4 items (guides, build artifacts)
- 05_AUDITS_AND_REPORTS: 3 files (audits)
- src/client: 78 files (React frontend)
- src/server: 13 files (backend API)

---

### TECH REF 32

**Quality Gates:**
- QG-1: Unit Tests (47 files, vitest)
- QG-2: Integration Tests
- QG-3: E2E Tests (Playwright)
- QG-4: Chaos Tests
- QG-5: Property Tests
- QG-6: Mutation Tests (Stryker)

---

### TECH REF 33

**Key insights so far:**
- Document Classification: MISSION CRITICAL - TIER 1
- Rigor Standard: NASA Flight Systems / Medical Device / Financial Trading
- CIA-SIE-PURE: Sophisticated algorithmic trading engine (Python/FastAPI) - HEADLESS SYSTEM
- MCI is the COCKPIT for CIA-SIE-PURE
- MCI provides: IGNITION, TELEMETRY, ALERTING, TOKEN MGMT, EMERGENCY
- MCI does NOT execute trades - that's the ENGINE's job

---

### TECH REF 34

**THE ANALOGY:**
- Airplane with engines but NO COCKPIT
- Nuclear reactor with NO CONTROL ROOM
- Patient on life support with NO MONITORS

---

### TECH REF 35

**FOUNDATIONAL UNDERSTANDING:**
- **CIA-SIE-PURE**: Sophisticated algorithmic trading engine (Python/FastAPI) - HEADLESS SYSTEM
- **MCI**: Mission Control Interface - the COCKPIT for CIA-SIE-PURE
- MCI provides: IGNITION, TELEMETRY, ALERTING, TOKEN MGMT, EMERGENCY
- MCI does NOT: Execute trades, Make decisions, Connect to brokers, Store trading data
- **MCI ONLY observes and controls. It is the EYES and HANDS, not the BRAIN.**

---

### TECH REF 36

**PHYSICAL LOCATIONS:**
- **CIA-SIE-PURE**: `/Users/nevillemehta/Downloads/CIA-SIE-PURE/` (Python, FastAPI, EXISTING, OPERATIONAL)
- **MCI**: `/Users/nevillemehta/Downloads/PROJECTS/01_MCI/` (TypeScript, React+Hono, SPECIFICATIONS COMPLETE)

---

### TECH REF 37

**CORE ARCHITECTURE:**
- **CIA-SIE-PURE** = THE ENGINE (Primary Trading System, Python/FastAPI, EXECUTES all trading)
- **MCI** = THE COCKPIT DASHBOARD (Mission Control Interface, TypeScript/React, MONITORS and IGNITES)
- **ANALOGY**: Dashboard does NOT drive - it OBSERVES and CONTROLS

---

### TECH REF 38

- **Branch 13: Infrastructure & Build** (beginning)
  - Build Configuration: vite.config.ts, vitest.config.ts, playwright.config.ts, tailwind.config.js, postcss.config.js, stryker.conf.mjs, tsconfig files
  - Package Management: package.json, package-lock.json, bun.lock
  - Environment section starting

---

### TECH REF 39

Key content:
- **Branch 12: Shared & Cross-Phase Code (13 files)**
  - Client Core: App.tsx, main.tsx, index.css, stores/index.ts, App.test.tsx
  - Server Core: index.ts, routes/index.ts, kite.ts service
  - Shared Types: types.ts
  - Test Infrastructure: setup.ts, test-utils.tsx, globals.d.ts, vitest.d.ts

---

### TECH REF 40

Key content:
- **Branch 13 continued (18 files total)**
  - Environment: .env, .env.example, .gitignore
  - E2E Testing: e2e/mci.spec.ts
  - Build Output: dist/ with compiled assets

---

### TECH REF 41

- **Branch 15: External Documentation** (beginning)
  - IRONCLAD Protocol: System prefix, PDF parsing protocol, Tool Arsenal guide
  - Project Assessments: Analysis report, Readiness assessment, Completion roadmap, NASA-grade testing
  - Deprecated section starting

---

### TECH REF 42

**KEY METRICS:**
- Total Files Referenced: 180
- LTT Nodes: 49
- Constitutional Requirements: 5
- LTT Completion Rate: 69%
- Architecture Gap Nodes: 13
- Q&A Entries: 16
- Tab Sections: 8

---

### TECH REF 43

**Category C: CRITICAL GAP - Layer 2 Architecture 0%**
- 13 nodes missing: Nodes 2.1-2.13
- Auth Sequence, Ignition Sequence, Telemetry Pipeline, Shutdown Sequence
- Backend State Machine, Component Hierarchy, State Management
- Phase Progression, User Interaction Flow, API Contract
- WebSocket Events, Error Propagation, Data Flow Lifecycle
- **KEY INSIGHT:** Flowcharts EXIST in Tab 7 but NOT marked complete in Tab 6 LTT - SYNCHRONIZATION ISSUE

---

### TECH REF 44

**Category B: NEEDS REVISION**
- Tab 2 "ACTION REQUIRED" items - no completion tracking
- LTT Layer 4A (93%) - 1 missing node unclear
- LTT Layer 4B (80%) - 1 missing node unclear
- Files Tab - only 4 folder excerpts, not all 180 files
- Schematics Frontend (Part 2B) - sparse, need 4 more diagrams
- Schematics Integration (Part 2C) - sparse, need 4 more diagrams

---

### TECH REF 45

Key content:
- **HIERARCHICAL MAP - Current State:**
  - Layer 1 (Constitutional Requirements): 100% âœ“
  - Layer 2 (Architecture): 0% âœ— CRITICAL - BUT EXIST IN TAB 7!
  - Layer 3 (Quality Gates): 100% âœ“ - Gates 0.5, 1, 2, 3, 4, 5
  - Layer 4A (Development Lifecycle): 93% - Phases 0-12 (14 nodes)
  - Layer 4B (Application Runtime): 80% - Runtime Phases 0-4 (5 nodes)
  - Layer 5 (Supervised Execution): 100% âœ“ - P1-P5 (No Assumption, Full Transparency, Checkpoint Compliance, Constitutional Fidelity, Reversibility)

---

### TECH REF 46

- **ACTIVITIES COMPLETED (14 items A01-A14):**
  - Document Classification, Folder Reorganization, 7-Layer Review
  - Interactive Project Tree, Project Synthesis, Master Context
  - Use Case Spec, 5 CRs, Code Audit (97% compliant)
  - RETROFIT Decision, 16 Q&A entries, 49-node LTT
  - Backend Flowcharts (5), 9-Tool Arsenal

---

### TECH REF 47

- **MERMAID DIAGRAMS:**
  - **6.1 Document Component Relationships** - Shows hierarchy:
    - ROOT: Master Use Case Spec
    - GOVERNANCE: CR-001 through CR-005
    - ARCHITECTURE: LTT 49 Nodes, Backend/Frontend/Integration Flowcharts
    - EXECUTION: Dev Lifecycle 14 Phases, Runtime 5 Phases, 9-Tool Arsenal
    - KNOWLEDGE: 16 Q&A Entries, 7-Layer Framework
    - Flow: MUS â†’ GOV â†’ EXEC, MUS â†’ ARCH â†’ EXEC â†’ KNOW
    - CR-001 validates RUN, CR-002 governs RUN, CR-005 defines FRONT

---

### TECH REF 48

- **RECOMMENDED ACTION PLAN:**
  - **Phase 1 IMMEDIATE (1-2 days):** Sync LTT/Schematics, cosmetic fixes, remove unused CSS, implement JS
  - **Phase 2 SHORT-TERM (3-5 days):** Create 4 Frontend + 4 Integration Flowcharts, complete 180 files, merge Q&A
  - **Phase 3 MEDIUM-TERM (1-2 weeks):** Consolidate tabs 1+2, restructure to 5 tabs, cross-references, LocalStorage
  - **Phase 4 LONG-TERM:** Maintain LTT, update Q&A, version control, consider React migration

---

### TECH REF 49

**THE PROBLEM STATEMENT:**
- CIA-SIE-PURE is a headless algorithmic trading engine (Python/FastAPI)
- WITHOUT MCI:
  - Cannot START safely
  - Cannot MONITOR vital signs
  - Cannot STOP in emergencies
  - No visibility into positions, health, errors
  - Token management (Kite) requires manual intervention
- Analogies: Airplane with NO COCKPIT, Nuclear reactor with NO CONTROL ROOM, Patient on life support with NO MONITORS
- RISK: Operating blind is CATASTROPHIC

---

### TECH REF 50

  **PHASE 3: TELEMETRY**
  - Telemetry Loop â†’ Positions Displayed â†’ Health Gauges â†’ P&L Calculated â†’ Alerts Processed â†’ Loop

---

### TECH REF 51

- **FAILURE MODE AND EFFECTS ANALYSIS (FMEA):**
  | Component | Failure Mode | Effect | Severity | Mitigation |
  |-----------|--------------|--------|----------|------------|
  | Token Capture | Rejected | Cannot start | CRITICAL | Retry + Help |
  | Token Capture | Expires | Engine stops | HIGH | Expiry alert |
  | Ignition | Won't start | No trading | CRITICAL | Error display |
  | Ignition | Partial start | Undefined state | CRITICAL | Rollback |
  | Telemetry | Data stale | Wrong decisions | HIGH | Staleness indicator |
  | Telemetry | Connection lost | No visibility | CRITICAL | Reconnect |
  | Positions | Display wrong | Wrong perception | CRITICAL | Validation |
  | Health | False positive | Unnecessary panic | MEDIUM | Thresholds |
  | Health | False negative | Missed problem | CRITICAL | Redundancy |
  | Shutdown | Unresponsive | Cannot stop | CRITICAL | Fallback |
  | Shutdown | Incomplete | Orphan positions | CRITICAL | Verification |
  | Alerts | Not delivered | Missed err

---

### TECH REF 52

- **WHAT MUST BE ERADICATED:**
  - 04_IMPLEMENTATION/mci/src/
  - All React Components
  - All Hono Routes
  - All State Stores
  - All Test Files
  - All Config Files
  - node_modules/
  - package.json

---

### TECH REF 53

  **WHY DOES MCI EXIST?**
  - To enable safe operation of CIA-SIE-PURE
  - Without MCI: blind operation - no visibility, no control, no safety
  - MCI is not optional; it is ESSENTIAL

---

### TECH REF 54

**LEVEL 2: TECHNOLOGY FOUNDATION (beginning)**
- Language: TypeScript (strict mode)

---

### TECH REF 55

Key content:
- **LEVEL 2: TECHNOLOGY FOUNDATION (continued)**
  - Runtime: Bun (speed, built-in tooling, native TS)
  - Backend: Hono (lightweight, fast, Bun-optimized)
  - Frontend: React 18 (component model, hooks)
  - Styling: Tailwind CSS (utility-first)
  - State: Zustand (simple, performant)

---

### TECH REF 56

- **DIRECTORY STRUCTURE (03_IMPLEMENTATION/mci/):**
  - src/components/
    - **uxmi/** â† UXMI Component Library (CR-005): Tooltip, Button, Input, Spinner, ProgressBar, Toast, ErrorDisplay
    - **token/** â† Token Capture Module (CR-004)
    - **scanner/** â† Pre-Ignition Scanner
    - **dashboard/** â† Telemetry Dashboard
    - **common/** â† Shared components
  - src/services/: kite.ts, anthropic.ts, telemetry.ts, guard.ts (Constitutional enforcement)
  - src/stores/ â† Zustand state stores
  - src/types/, src/utils/, tests/, public/

---

### TECH REF 57

**PHASE 1: PRE-IGNITION SCANNER**
- PURPOSE: System health verification before market operations
- PREREQUISITE: Valid Kite token from Phase 0
- **12 SCANNER CHECKS (<500ms total):**
  1. Token Validity - Kite token present & not expired
  2. API Connectivity - Kite API reachable, <100ms
  3. Market Status - NSE/BSE open/closed
  4. Backend Health - All 4 backends responding
  5. Position Sync - Positions match across backends
  6. Order Queue - No stuck orders
  7. PnL Calculation - Intraday PnL correct
  8. Risk Limits - Within thresholds
  9. Claude AI - Anthropic API accessible
  10. Local Time Sync - Clock within tolerance
  11. WebSocket - Real-time feed connection
  12. Watchlist - Instruments loaded

---

### TECH REF 58

**PHASE 2: IGNITION SEQUENCE**
- PURPOSE: Activate monitoring for selected backends
- PREREQUISITE: All Pre-Ignition checks passed
- **4 BACKENDS:** ICICI Direct, HDFC Sky, Kotak Neo, Zerodha Kite (toggle each)
- **5 IGNITION PHASES:**
  1. Backend Selection
  2. Connection Init (WebSocket handshake)
  3. Data Sync (initial position/order fetch)
  4. Stream Activation (real-time feed)
  5. Dashboard Ready (telemetry populates)
- **CONSTRAINT:** Claude AI observes ONLY, never interacts with trading

---

### TECH REF 59

- **REFRESH STRATEGY:**
  - Real-time: WebSocket for ticks, orders
  - Polling: Positions every 5s, P&L every 10s
  - On-demand: Manual refresh button

---

### TECH REF 60

**PHASE 4: SHUTDOWN PROTOCOL**
- PURPOSE: Graceful termination of monitoring session
- **SHUTDOWN SEQUENCE (5 steps):**
  1. User initiates â†’ "End Session" button (confirmation required)
  2. Stream close â†’ WebSocket connections terminated
  3. State snapshot â†’ Final positions/P&L logged
  4. Token clear â†’ Optionally clear stored token
  5. Session end â†’ Return to Token Capture (Phase 0)

---

### TECH REF 61

**PART II: IMPLEMENTATION SEQUENCE**
- **STEP 1: PROJECT INITIALIZATION**
  - Location: 03_IMPLEMENTATION/mci/
  - Create directory structure, Initialize Bun project

---

### TECH REF 62

Key content:
- **STEP 1 (continued):**
  - Install dependencies: hono, react, react-dom, tailwindcss, zustand, @anthropic-ai/sdk
  - Configure TypeScript strict mode
  - Setup Tailwind CSS

---

### TECH REF 63

- **STEP 3: PHASE 0 - TOKEN CAPTURE MODULE (CR-004)**
  - Location: src/components/token/, src/services/
  - **BUILD ORDER:**
    1. TokenCaptureForm.tsx (using UXMI)
    2. TokenTimer.tsx (countdown)
    3. kite.ts (API validation)
    4. tokenStore.ts (Zustand state)
  - Requirements: UXMI components, 6:00 AM IST expiry, WHAT/WHY/HOW errors, 5-step workflow

---

### TECH REF 64

- **STEP 2: UXMI COMPONENT LIBRARY (CR-005)**
  - Location: src/components/uxmi/
  - **BUILD ORDER:**
    1. Tooltip.tsx â† Foundation for all hover help
    2. Button.tsx â† Most used interactive element
    3. Input.tsx â† Token form, search fields
    4. Spinner.tsx â† Loading states
    5. ProgressBar.tsx â† Long operations
    6. Toast.tsx â† Notifications
    7. ErrorDisplay.tsx â† Error handling
  - **EACH COMPONENT MUST:**
    - Implement The Seven States
    - Include keyboard navigation
    - Use animation timing standards
    - Export TypeScript types
    - Include usage examples in comments

---

### TECH REF 65

- **STEP 6: PHASE 3 - TELEMETRY DASHBOARD**
  - Location: src/components/dashboard/
  - **BUILD ORDER:**
    1. DashboardLayout.tsx (panel arrangement)
    2. TokenPanel.tsx (Phase 0 integration)
    3. BackendPanel.tsx (health cards)
    4. PositionsPanel.tsx (CR-002 conflict display)
    5. OrdersPanel.tsx (order tracking)
    6. PnLPanel.tsx (P&L calculation)
    7. AILogPanel.tsx (CR-003 Claude observations)
  - Requirements: Real-time WebSocket, UXMI throughout, CR-002 conflict display

---

### TECH REF 66

- **STEP 8: INTEGRATION & TESTING**
  - Location: tests/
  - **BUILD ORDER:**
    1. uxmi.test.ts (component tests)
    2. token.test.ts (token flow)
    3. scanner.test.ts (scanner tests)
    4. integration.test.ts (full flow)
  - Requirements: All CRs verified, UXMI compliance, Gate 5 passed

---

### TECH REF 67

Key content:
- **PART IV: GATE CHECKPOINTS**
  | Gate | Name | Reviewers | Key Criteria |
  |------|------|-----------|--------------|
  | 1 | Selection | Tech Lead | Technology stack approved |
  | 2 | Architecture | Architect | C4 diagrams complete |
  | 3 | Specification | PM | Master spec signed off |
  | 4 | Implementation | Tech Lead | Code review passed |
  | **5** | **Integration** | **Tech Lead + PM + UX** | **UXMI Audit Checklist (CR-005)** |

---

### TECH REF 68

**Summary of Document 10 (699 lines):**
- **Master Execution Manifest** - Complete contextual rehydration document
- **6 LEVELS of Production Lifecycle Tree:**
  - Level 0: Genesis (concept, codename)
  - Level 1: Constitutional Framework (5 CRs)
  - Level 2: Technology Foundation (TypeScript, Bun, Hono, React, Tailwind, Zustand)
  - Level 3: Operational Phases (0-4: Token, Scanner, Ignition, Telemetry, Shutdown)
  - Level 4: UXMI (CR-005) - Seven States, Tooltips, Loading, Errors, Keyboard, Animation
  - Level 5: Architecture & Specification Documents hierarchy
  - Level 6: Execution Authority Matrix (User, Cowork, Claude Code)

---

### TECH REF 69

**PHASE 0: GENESIS & GOVERNANCE [COMPLETE]**
- 0.1 Project Conception âœ… â†’ USER
- 0.2 Constitutional Constraints âœ… â†’ USER + COWORK
  - CR-001 through CR-005 all ESTABLISHED
- 0.3 Technology Selection âœ… â†’ COWORK
  - TypeScript, Bun, Hono, React 18, Tailwind, Zustand - all DECIDED
- 0.4 Folder Reorganization âœ… â†’ COWORK
  - 00_MASTER_DOCUMENTS through 05_AUDITS_AND_REPORTS - all created
  - **04_IMPLEMENTATION â†’ Ready (Empty)**

---

### TECH REF 70

- 4.2 Project Initialization â³ PENDING â†’ **CLAUDE CODE**
  - 04_IMPLEMENTATION/mci/
  - bun init, package.json, tsconfig.json, tailwind.config.js

---

### TECH REF 71

**IMMEDIATE: Claude Code Implementation (9 Steps):**
1. Read Master Documents (Manifest + Claude Code Instruction)
2. Project Initialization (cd 04_IMPLEMENTATION, bun init, install deps)
3. UXMI Component Library (**BUILD FIRST**) - 7 components, Seven States, 300ms tooltips
4. Phase 0 - Token Capture (6-module, 5-step workflow)
5. Phase 1 - Pre-Ignition Scanner (12 checks in <500ms)
6. Phase 2 - Ignition Sequence (4-backend selection)
7. Phase 3 - Telemetry Dashboard (real-time panels)
8. Phase 4 - Shutdown Protocol (graceful termination)
9. Testing & Gate 5 Audit (UXMI compliance)

---

### TECH REF 72

**2.1 Mission Objective:** Build complete MCI - TypeScript/Bun/Hono/React for 4 trading backends

---

### TECH REF 73

**PILLAR 4: CONSTITUTIONAL FIDELITY**
- Verify CR compliance at verification points
- DEMONSTRATE compliance, not merely assert
- HALT if any CR violation detected

---

### TECH REF 74

**1.2 APPROVAL PROTOCOL (7 steps):**
1. ANNOUNCE - State what will be done
2. EXPLAIN - Describe why and what it affects
3. RISK-ASSESS - Identify potential issues
4. AWAIT - Wait for explicit User approval
5. EXECUTE - Perform approved action only
6. REPORT - Confirm completion and outcome
7. CHECKPOINT - Present for review before next step

---

### TECH REF 75

**GATE A: PROJECT INITIALIZATION**
- Prerequisite: None
- Activities: Navigate to directory, `bun init`
- Present: Working directory confirmation, bun init output, package.json
- **Required directory:** `/Users/nevillemehta/Downloads/PROJECTS/01_MCI/src/`
- Approval: `GATE A APPROVED` or `GATE A REJECTED`
- Rollback: Delete package.json and node_modules/

---

### TECH REF 76

**GATE B: DEPENDENCY INSTALLATION**
- Prerequisite: GATE A APPROVED
- Activities: Install all npm packages
- Production deps: hono (continued...)

---

### TECH REF 77

**Rollback:** `rm -rf node_modules && rm bun.lockb`

---

### TECH REF 78

**Dependencies:**
- Production: hono, @hono/node-server, react, react-dom, zustand
- Development: typescript, @types/react, @types/react-dom, tailwindcss, postcss, autoprefixer, vite, @vitejs/plugin-react

---

### TECH REF 79

Key content:
**GATE C (continued) - Directory Structure:**
```
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useTokenState.ts
â”‚   â”‚   â”œâ”€â”€ useIgnitionState.ts
â”‚   â”‚   â””â”€â”€ useSSE.ts
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ tokenStore.ts
â”‚   â”‚   â”œâ”€â”€ scannerStore.ts
â”‚   â”‚   â””â”€â”€ dashboardStore.ts
â”‚   â”œâ”€â”€ App.tsx, main.tsx, index.css
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ routes/ (health, token, scanner, ignition, telemetry)
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ kite.ts, anthropic.ts, scanner.ts
â”‚       â””â”€â”€ guard.ts â† CRITICAL: Constitutional enforcement
â””â”€â”€ shared/
    â””â”€â”€ types.ts
```

---

### TECH REF 80

**GATE D-1: Tooltip.tsx**
- **Requirements:**
  - 300ms appear delay (SACRED per CR-005)
  - 100ms disappear delay
  - 280px max width
  - Position: prefer top, auto-flip
  - Escape key dismisses
  - Content: "What happens if I click?"
  
- **Must Present:** Complete source code, 300ms delay demo, keyboard accessibility

---

### TECH REF 81

**Core Structure:**
- **5 Pillars**: No Assumption, Full Transparency, Checkpoint Compliance, Constitutional Fidelity, Reversibility
- **7-Step Approval Protocol**: ANNOUNCE â†’ EXPLAIN â†’ RISK-ASSESS â†’ AWAIT â†’ EXECUTE â†’ REPORT â†’ CHECKPOINT
- **8 Gates (A-H)** with 20+ Sub-Checkpoints
- **32 Steps** total implementation sequence

---

### TECH REF 82

**THE PROBLEM:**
- CIA-SIE-PURE requires coordinated initialization of 4 subsystems:
  1. FastAPI Backend Server
  2. SQLite Database
  3. Kite Zerodha API
  4. Anthropic Claude API

---

### TECH REF 83

| Section | Content |
|---------|---------|
| 1 | Project Definition - Problem/Solution/Scope |
| 2 | Pre-Ignition Verification Protocol (PIVP) - <500ms, 14 checks |
| 3 | Anthropic Model Selection - 4 models, budget display |
| 4 | Sequential Ignition Protocol - 5 phases with progress bars |
| 5 | Mission Control Dashboard Design - 4 subsystem cards |
| 6 | Telemetry & Monitoring - Real-time metrics |
| 7 | Shutdown & Recovery Protocols - Graceful + Emergency |
| 8 | Visual Design Specifications - Dark theme, NASA-inspired |
| 9 | Creative Feature Enhancements - GO/NO-GO poll, MET, heartbeat |
| 10 | Technical Architecture - Web-based (FastAPI+HTML) recommended |
| 11 | Gold Standard Compliance - 12 stages, 10 gates |
| 12 | Acceptance Criteria - 20 functional, 8 non-functional, 7 constitutional |
| 13 | Authorization |

---

### TECH REF 84

**OPERATIONAL DEFINITION - "FULLY OPERATIONAL" = ALL SYSTEMS GO:**
- 4 Subsystems must be verified:
  1. FastAPI Server âœ“
  2. SQLite Database âœ“
  3. Kite Zerodha âœ“
  4. Anthropic Claude âœ“
- ALL FOUR SUBSYSTEMS MUST BE VERIFIED BEFORE "GO" STATUS

---

### TECH REF 85

**OUT OF SCOPE:** Frontend (Vite), ngrok tunnel, Mercury module, DB admin, config editing, **Trade signal access (CR-001)**, automatic token refresh

---

### TECH REF 86

**4.1 IGNITION SEQUENCE VISUALIZATION:**
- T-countdown display
- 4 Subsystems with progress bars:
  1. FastAPI Server - 100% â— GO
  2. Database Connect - 100% â— GO  
  3. Kite Zerodha Auth - 80% VERIFYING
  4. Anthropic Claude - 0% PENDING
- Mission Elapsed Time (MET) counter
- [ABORT SEQUENCE] button available

---

### TECH REF 87

**PHASE 1: FASTAPI SERVER IGNITION**
- Step 1.1: Activate Python venv
- Step 1.2: Load .env file
- Step 1.3: Start uvicorn (port 8000)
- Step 1.4: Poll /health every 200ms (max 30s)
- Step 1.5: Verify {"status": "healthy"}
- Result: GO / NO-GO

---

### TECH REF 88

**SUBSYSTEM TELEMETRY - 4 Cards:**
| Card | Metrics |
|------|---------|
| FASTAPI | Port: 8000, Uptime: 2:45, Req/min: 12, Latency: 45ms |
| DATABASE | Size: 4.2 MB, Tables: 13, Queries: 847, Avg: 3ms |
| KITE ZERODHA | Token: VALID, Expiry: 14:22, User: NM****, Rate: OK |
| ANTHROPIC | Model: sonnet, Budget: $42.50, Calls: 23, Tokens: 12.4K |

---

### TECH REF 89

**FastAPI Server Telemetry:**
- Uptime, Port, Requests/Minute, Average Latency, Active Connections, Memory Usage, CPU Usage, Last Health Check

---

### TECH REF 90

| Component | Poll Interval | Timeout | Failure Action |
|-----------|---------------|---------|----------------|
| FastAPI /health | 5 seconds | 3 seconds | Mark DEGRADED |
| Database SELECT 1 | 30 seconds | 5 seconds | Mark DEGRADED |
| Kite Token Expiry | **1 second** | N/A | Update countdown |
| Kite /user/profile | 5 minutes | 10 secs | Mark DEGRADED |
| Anthropic Ping | 5 minutes | 30 secs | Mark DEGRADED |
| System Resources | 30 seconds | N/A | Show warning |

---

### TECH REF 91

**9.1 GO/NO-GO POLL DISPLAY (NASA-inspired):**
- BOOSTER (FastAPI) â— GO
- RETRO (Database) â— GO
- FIDO (Kite Zerodha) â— GO
- GUIDANCE (Anthropic) â— GO
- FLIGHT DIRECTOR â— GO FOR LAUNCH

---

### TECH REF 92

**OPTION A: WEB-BASED (RECOMMENDED)**
- Backend: FastAPI (separate from CIA-SIE backend)
- Frontend: HTML5 + Vanilla JS or Alpine.js
- Real-time: Server-Sent Events (SSE)
- Process: subprocess + psutil
- Storage: JSON file
- **Port: 8080 (MCI) manages Port 8000 (CIA-SIE Backend)**

---

### TECH REF 93

**Key takeaways from this ORIGINAL COMMISSIONING BRIEF:**
- This is the ORIGINAL project brief dated **January 16, 2026**
- Originally focused on **Kite/Zerodha** as single broker
- 4 subsystems: FastAPI + SQLite + Kite Zerodha + Anthropic Claude
- **CR-001 through CR-004** defined (CR-005 added later)
- 6 AM IST token expiry rule established here
- **Dark theme** originally specified (later docs may show evolution)
- Gold Standard 12-stage development cycle required

---

### TECH REF 94

**2.1 AUTOMATIC SYSTEM SCAN - 14 Checks:**
| Check | Status | Time |
|-------|--------|------|
| Port 8000 (Backend API) | CLEAR | 0.003s |
| Port 8001 (Health Monitor) | CLEAR | 0.002s |
| Existing uvicorn Process | NONE | 0.015s |
| Python Environment | VALID | 0.045s |
| Virtual Environment | ACTIVE | 0.012s |
| Database File | EXISTS | 0.001s |
| Disk Space | 45.2 GB | 0.008s |
| Available Memory | 8.4 GB | 0.005s |
| KITE_API_KEY | SET | 0.001s |
| KITE_API_SECRET | SET | 0.001s |
| ANTHROPIC_API_KEY | VALID | 0.002s |
| Kite Token File | EXISTS | 0.001s |
| Token Expiry Status | VALID 14h | 0.003s |

---

### TECH REF 95

**OPTION B: TERMINAL UI (TUI)**
- Framework: Textual (Python)
- Disadvantage: OAuth requires external browser

---

### TECH REF 96

**7.2 EMERGENCY STOP:**
- Immediately terminates ALL processes without graceful shutdown
- Use only when:
  - System is unresponsive
  - Graceful shutdown timed out
  - Critical error requires immediate halt
- WARNING: Pending operations will be lost

---

### TECH REF 97

Advantages: Browser OAuth, real-time SSE, minimal footprint, cross-platform

---

### TECH REF 98

**Daily Workflow (Total ~38 seconds):**
1. 08:00:00 - Operator opens MCI (localhost:8080)
2. 08:00:01 - MCI checks for valid Kite token
3. IF TOKEN VALID â†’ Pre-Ignition Scanner
4. IF TOKEN EXPIRED/MISSING â†’ Token Capture Form
5. 08:00:05 - Copy Kite Login URL from MCI
6. 08:00:10 - Paste URL in Chrome, login
7. 08:00:25 - Kite redirects to callback URL
8. 08:00:30 - Copy callback URL from Chrome
9. 08:00:35 - Paste URL into MCI Token Capture Form
10. 08:00:36 - MCI processes token (6-module sequence)
11. 08:00:38 - TOKEN AUTHENTICATED â†’ Pre-Ignition

---

### TECH REF 99

**Component API Standards (TypeScript Interface):**
```typescript
interface UXMIComponentProps {
  tooltip?: string;
  tooltipPosition?: 'top' | 'bottom' | 'left' | 'right' | 'auto';
  loading?: boolean;
  loadingText?: string;
  disabled?: boolean;
  disabledReason?: string; // REQUIRED if disabled=true
  ariaLabel?: string;
  shortcut?: string;
}
```

---

### TECH REF 100

| UXMI Failure | Potential Consequence |
|--------------|----------------------|
| No loading indicator | User clicks again, duplicate action |
| Ambiguous button purpose | Wrong action taken |
| No error explanation | User cannot recover, abandons task |
| No disabled state explanation | User confused, wastes time |
| No keyboard navigation | Accessibility failure, exclusion |
| Jarring transitions | Disorientation, missed information |
| No success confirmation | Uncertainty, repeated actions |
| No progress indication | Assumes frozen, force-closes app |

---

### TECH REF 101

1. **DEFAULT (Idle)** - Normal appearance, cursor: pointer, visual affordance
2. **HOVER** - Visual change on mouse enter, tooltip after 300ms, subtle highlight
3. **FOCUS** - Keyboard navigation visible, high-contrast focus ring (accessibility), distinct from hover
4. **ACTIVE (Pressed)** - Visual feedback during click, slight scale/color shift, <100ms response
5. **LOADING** - Spinner/progress bar, element disabled, text changes ("Submit" â†’ "Submitting...")
6. **DISABLED** - Greyed out, cursor: not-allowed, MUST have tooltip explaining WHY
7. **SUCCESS/ERROR** - Green checkmark/Red highlight, clear feedback, transitions appropriately

---

### TECH REF 102

**Implementation Checklist (EVERY component):**
- â–¡ Default state defined and styled
- â–¡ Hover state with visual change
- â–¡ Hover tooltip (appears after 300ms)
- â–¡ Focus state with visible ring
- â–¡ Active/pressed state feedback
- â–¡ Loading state with spinner
- â–¡ Disabled state with explanation tooltip
- â–¡ Success state confirmation
- â–¡ Error state with recovery guidance

---

### TECH REF 103

2. **PROGRESS BAR** (1-30 seconds)
   - Multi-step processes
   - Show percentage + current step description
   - Smooth 60fps animation, never jump backwards

---

### TECH REF 104

3. **STEP INDICATOR** (Variable)
   - Sequential processes with distinct phases
   - Show all steps, highlight current, show timing

---

### TECH REF 105

**Toast Notification Specifications:**
- Position: Top-right corner (16px from edges)
- Width: 320px - 400px
- Duration (Success): 3 seconds
- Duration (Error): Persistent (user dismisses)
- Duration (Warning): 5 seconds
- Animation In: Slide from right (200ms)
- Animation Out: Fade out (150ms)
- Stacking: Max 3 visible, queue others

---

### TECH REF 106

**The Seven States:**
- â–¡ Default state styled
- â–¡ Hover state with visual change
- â–¡ Hover tooltip with helpful description
- â–¡ Focus state with visible ring (2px cyan)
- â–¡ Active/pressed state feedback
- â–¡ Loading state with indicator
- â–¡ Disabled state with explanation tooltip
- â–¡ Success state confirmation
- â–¡ Error state with WHAT/WHY/HOW

---

### TECH REF 107

**CIA-SIE Case Study Decision:**
- Backend: Python + FastAPI (chosen for AI SDK support, rapid development, data handling)
- Frontend: React + TypeScript (recommended)
- Alternative considered: TypeScript full-stack (same language benefit, better performance)

---

### TECH REF 108

**Stack Options Documented:**
- MERN (MongoDB, Express, React, Node)
- PERN (PostgreSQL, Express, React, Node)
- Python + React (FastAPI/Django + React)
- Go + React (high performance)
- Java + Angular (enterprise)

---

### TECH REF 109

Phases 1-3: Ideation (no tech required), Conceptualization (preliminary assessment), Requirements (constraints identification). Constraint categories captured.

---

### TECH REF 110

Phase 11: Deployment & Operations. Part III: Backend Technology Reference - Language comparison matrix (Python, TypeScript, Go, Rust, Java, C#). Use case recommendations captured.

---

### TECH REF 111

Rust, Java, C# use cases. Part IV: Frontend Reference - React, Vue, Angular, Svelte comparison matrix. Part V: Database Reference begins - Relational, Document, Key-Value types.

---

### TECH REF 112

Database types: Graph, Time-Series, Vector. Decision tree for database selection. Part VI: Full-stack recommendations matrix. CIA-SIE Case Study: Python (FastAPI) + PostgreSQL + React (planned).

---

### TECH REF 113

CIA-SIE alternative (TypeScript - 3x performance but decision: finish Python first). Part VII: Compliance Requirements - 4 mandatory TSR documents. Gate Review matrix (Gates 1-5). Constitutional Constraints Registry with all 5 CRs.

---

### TECH REF 114

Part I: Mission Parameters - TypeScript/Bun/Hono/React MCI for 4 trading backends. Location: `/Users/nevillemehta/Downloads/CIA-SIE-START-STOP/04_IMPLEMENTATION/mci/`. Authority chain: User â†’ Cowork AI â†’ Claude Code (supervised).

---

### TECH REF 115

Part IV: Supervised Execution Sequence - T-Minus Checklist (T-10 to T-0). Step 1: Project Initialization - bun init, dependencies (hono, react, zustand, typescript, tailwind, vite). Step 2: Directory Structure. VALIDATION CHECKPOINT after each step.

---

### TECH REF 116

**Mission:** Build MCI (TypeScript/Bun/Hono/React) for 4 trading backends
**Location:** `/Users/nevillemehta/Downloads/CIA-SIE-START-STOP/04_IMPLEMENTATION/mci/`
**Mode:** SUPERVISED - user validation required at EVERY checkpoint

---

### TECH REF 117

Steps 5-10:
- Step 5: Phase 1 Pre-Ignition Scanner (12 checks in <500ms)
- Step 6: Phase 2 Ignition (BackendSelector, IgnitionButton)
- Step 7: Phase 3 Telemetry Dashboard (SSE real-time)
- Step 8: Phase 4 Shutdown (ShutdownButton, ShutdownModal)
- Step 9: Backend Services (server/index.ts, kite.ts, anthropic.ts, guard.ts)
- Step 10: Config files (package.json, tsconfig.json, tailwind.config.js)

---

### TECH REF 118

**T-Minus Execution Sequence:**
- T-10 to T-5: Setup (navigate, init, dependencies, TypeScript, Tailwind, directories)
- T-4: UXMI Component Library (CRITICAL FOUNDATION)
- T-3: Phase 0 Token Capture (6 modules)
- T-2: Phases 1-4 (Scanner, Ignition, Dashboard, Shutdown)
- T-1: Backend Services
- T-0: LAUNCH verification

---

### TECH REF 119

Step 3: UXMI Component Library (CRITICAL - BUILD FIRST):
- Tooltip.tsx (300ms delay, auto-flip, Escape dismisses)
- Button.tsx (Seven States)
- Input.tsx (2px focus ring, WHAT/WHY/HOW)
- Spinner.tsx (3 sizes)
- ProgressBar.tsx (300ms transitions)
- Toast.tsx (4 variants, 200ms slide-up, 5s auto-dismiss)
- ErrorDisplay.tsx (WHAT/WHY/HOW)

---

### TECH REF 120

Section 1: Executive Summary - MCI for CIA-SIE-PURE trading backend. CRITICAL: Decision-Support only, ZERO trading signals. Key Metrics: <500ms scan, 60fps UI, <100ms telemetry latency, 99.9% uptime. Section 2 begins: Architecture - standalone control panel via HTTP/SSE.

---

### TECH REF 121

Architecture diagram: MCI (Port 8080) â†’ CIA-SIE-PURE Backend (Port 8000). Communication protocols: HTTP REST (control), SSE (telemetry), Kite API (token validation), Anthropic (model check). System states begin: DORMANT (gray), PRE_FLIGHT (yellow pulsing).

---

### TECH REF 122

Phase Assignment Matrix: 1-4 (Cowork primary), 5-7 (Claude Code primary). Section 4: Technology Stack - Bun 1.0+ (runtime), Hono (backend framework).

---

### TECH REF 123

Tech stack continued: Hono 4.0+, React 18+, Tailwind 3.0+, SSE, Vite 5.0+. Seven-Factor Evaluation: TypeScript 8.80 vs Python 6.95. Section 5: Constitutional Constraints - CR-001 (ZERO trading access), CR-002 (display BOTH conflicting states), CR-003 begins (observational AI only).

---

### TECH REF 124

Telemetry metrics: CPU (1s), Memory (1s), Disk (30s), Network (1s), Kite TTL (1s), Uptime (1s). SSE event format with JSON telemetry payload. Section 9: Development Gates - G1 Requirements Approved.

---

### TECH REF 125

Glossary: CIA-SIE-PURE, Pre-Ignition, Ignition, Telemetry, Kite Connect, SSE, Constitutional Constraint, C4 Diagram, ADR. Footer references PROJECT_BRIEF_BCI_001.md and TECHNOLOGY_SELECTION_LIFECYCLE_SPECIFICATION.md. JavaScript search/navigation begins.

---

### TECH REF 126

**Tech Stack (MANDATED):**
- Bun 1.0+, Hono 4.0+, React 18+, Tailwind 3.0+, Vite 5.0+, SSE
- Seven-Factor Evaluation: TypeScript 8.80 vs Python 6.95
- Port: 8080 (MCI), Port 8000 (CIA-SIE-PURE)

---

### TECH REF 127

**Phases:**
- Phase 0: Token Capture (6 modules, mandatory prerequisite)
- Phase 1: Pre-Ignition Scanner (12 checks)
- Phase 2: Ignition Sequence (3-second timeline)
- Phase 3: Telemetry Dashboard (SSE real-time)
- Phase 4: Shutdown

---

### TECH REF 128

Phase 1 Scanner mockup: Header with token countdown (04:32:15, green #22C55E). 12 checks listed with tooltips: Kite Token (12ms), API Connectivity (45ms), Market Status (23ms), ICICI Direct (67ms), HDFC Sky (54ms), Kotak Neo (78ms), Zerodha Kite (42ms), Position Sync (89ms), Order Queue (34ms), Claude AI (156ms), Time Sync (28ms), WebSocket (65ms). Total 387ms < 500ms target. PROCEED TO IGNITION button.

---

### TECH REF 129

Batch 6 ingested (lines 376-450). Phase 1 Scanner wireframe: 12 checks with progress bar, total time 387ms, target <500ms. 12 Scanner Checks: Kite Token, API Connectivity, Market Status, 4 backends (ICICI Direct, HDFC Sky, Kotak Neo, Zerodha Kite), Position Sync, Order Queue, Claude AI, Time Sync, WebSocket. Status icons: âœ… PASS, âš ï¸ WARN, âŒ FAIL, ğŸ”„ RUNNING, â³ PENDING. Checks run in parallel, 5000ms individual timeout. Continuing.

---

### TECH REF 130

Batch 10 ingested (lines 676-750). Real-time updates via SSE, stale data amber indicator. CR-002 compliance: show BOTH entries for same symbol on different backends, color-code by backend, NEVER auto-reconcile. CR-003 compliance: ONLY descriptive, NEVER prescriptive, ALWAYS show disclaimer. Phase 4 Shutdown Confirmation Modal: session summary (duration, backends, positions, P&L), note "positions remain on broker platforms", checkbox to clear token data. Continuing.

---

### TECH REF 131

Batch 11 ingested (lines 751-825). Shutdown Sequence: 5 steps (Close WebSocket, Save session state, Generate report, Clear auth, Redirect to login) with progress bar. Header Component: 64px height, #1E293B background, elements include logo, token countdown, LIVE indicator, End Session button. UXMI Component Library: 7 components (Tooltip, Button, Input, Spinner, ProgressBar, Toast, ErrorDisplay) in src/client/uxmi/. UXMI Golden Rules: tooltip for every interactive element, visible feedback for every action, progress indicator for every wait. Continuing.

---

### TECH REF 132

Batch 14 ingested (lines 976-1050). Error Recovery Flows continued: Token Expired at 6:00 AM IST (CR-004) - modal forces Re-Authenticate or End Session. WebSocket Disconnection - auto-reconnect 3 times, toast notifications, error modal if failed. PART XI Keyboard Shortcuts: Ctrl+Enter (Validate/Ignite), Ctrl+R (Re-run Scanner), Escape (close modal), Tab/Shift+Tab (navigate), Space (toggle/select), Ctrl+Q (End Session). All shortcuts shown in tooltips. Document Control section starting. Continuing.

---

### TECH REF 133

Batch 11 ingested (lines 751-825). CSS Custom Properties continued: Spacing (2-64px), Border Radius (0-9999px), Shadows (sm/md/lg/xl/tooltip/modal), Animation Durations (instant 100ms, fast 150ms, normal 200ms, slow 250ms, slower 300ms, spinner 1000ms), Easing functions, Tooltip tokens (300ms appear, 100ms disappear, 280px max, 12px font, z-index 9999). Tailwind Config Export starting with colors. Continuing.

---

### TECH REF 134

Batch 12 ingested (lines 826-900). Tailwind Config continued: colors (background, surface, border, focus-ring, tooltip), fontFamily, fontSize, spacing, borderRadius, boxShadow, transitionDuration (instant/fast/normal/slow/slower), transitionTimingFunction. Animation config starting. Continuing.

---

### TECH REF 135

Key captures from final batches:
- Tailwind animations: spin-slow (1s), pulse-soft (2s)
- Complete tailwind.config.js export ready for implementation
- Document Control: Version 1.0.0, Date 2026-01-23, Phase 3.5 Deliverable
- Source: ADDENDUM_002_UX_MICRO_INTERACTIONS.md (1,077 lines)
- All 5 CRs verified compliant
- Document is BINDING for all MCI development

---

### TECH REF 136

Batch 6 ingested (lines 376-450). C1 System Context Diagram SVG: Human Operator (blue, top) â†’ MCI (cyan, center, "Aerospace-inspired control panel for CIA-SIE-PURE operations") â†’ CIA-SIE-PURE (green, right, Port 8000, HTTP/SSE) â†’ Kite Connect API (amber, external, Token Status) â†’ Anthropic API (purple, external, Model Selection). Relationships with arrows and labels. Legend starting. Continuing.

---

### TECH REF 137

Batch 7 ingested (lines 451-525). Legend complete: Person (blue), Core System MCI (cyan), Internal CIA-SIE (green), External Kite (amber), External Anthropic (purple). Key Relationships described: Port 8080 dashboard, Port 8000 API/SSE, Kite 6 AM IST expiry. C2 Container Diagram: MCI System Boundary (Port 8080), React SPA (React 18+, Tailwind, 60fps UI), Hono API Server (Hono 4.0+, REST+SSE, Bun Runtime). Pre-Ignition Scanner starting. Continuing.

---

### TECH REF 138

Batch 8 ingested (lines 526-600). C2 Container Diagram continued: Scanner Service (amber, 12 Pre-flight Checks), Token Manager (red, Kite Lifecycle 6AM IST), Model Selector (purple, Anthropic Models). External systems: Operator, CIA-SIE (Port 8000), Kite API (Zerodha), Anthropic (Claude API). Connections: Operatorâ†’SPA (HTTPS), SPAâ†’Hono (HTTP/SSE), Honoâ†’CIA-SIE (HTTP), Honoâ†’Services (dashed), Servicesâ†’External. Continuing.

---

### TECH REF 139

Batch 9 ingested (lines 601-675). C2 Legend: React 18+ SPA, Hono 4.0+, Pre-Ignition Scanner, Kite Token Manager, Anthropic Model Selector. Container Responsibilities: 60fps UI, SSE streams, 12 checks in <500ms, token warnings at T-60/T-30/T-5 minutes. C3 Component Diagram starting: Hono API Server internal components. API Layer with Health Router (/api/health/*), Ignition Router (/api/ignition/*). Continuing.

---

### TECH REF 140

Batch 10 ingested (lines 676-750). C3 Component Diagram continued: API Layer routes - Telemetry Router (/api/telemetry/stream), Config Router (/api/config/*). Service Layer: PreIgnitionScanner (scanner.ts, runAllChecks(), validateCheck()), KiteTokenService (kite.ts, getTokenStatus(), getTimeToExpiry()), AnthropicService (anthropic.ts, listModels(), selectModel()). State Management: SystemStateMachine (DORMANTâ†’ACTIVEâ†’SHUTDOWN), TelemetryEmitter (SSE Broadcast), Constitutional box (CR-001 to CR-004, INVIOLABLE RULES). Continuing.

---

### TECH REF 141

Batch 11 ingested (lines 751-825). C3 External Dependencies: CIA-SIE Backend :8000, Kite Connect API, Anthropic API. Component Interfaces: Health Router (GET /live, /ready, /backend), Ignition Router (POST /start, /abort, GET /status), Telemetry Router (GET /stream SSE, /snapshot), Config Router (GET /models, PUT /model/select). Phase 0 Token Capture Flow starting: 6-module architecture, MANDATORY prerequisite before Pre-Ignition Scanner. MCI Startup node (localhost:8080). Continuing.

---

### TECH REF 142

Batch 19 ingested (lines 1351-1425). State Transition Rules: System requires ALL 12 pre-flight checks pass for READYâ†’IGNITION, Ignition duration exactly 3 seconds. Kite Token: WARNING triggers yellow pulse, CRITICAL triggers red alert + audio, EXPIRED blocks all operations and forces SHUTDOWN. Implementation Guide for Claude Code: Step 1 Project Initialization (bun init, add hono, react, vite, tailwind). Step 2 Directory Structure (server/routes, server/services, client/components, shared/types). Step 3 Build Pre-Ignition Scanner First with CheckResult interface starting. Continuing.

---

### TECH REF 143

Batch 20 ingested (lines 1426-1500). CheckResult interface: id, name, status (pass/fail/warn), latency_ms, details. All 12 checks <500ms total. Step 4 State Machine: SystemState type (DORMANT, PRE_FLIGHT, READY, IGNITION, ACTIVE, SHUTDOWN). Step 5 React Dashboard components: PreIgnitionScanner, ModelSelector, IgnitionButton, TelemetryDashboard, KiteTokenCountdown. Design tokens: Background #0a0e17, Accent #06b6d4, Success #10b981, Warning #f59e0b, Error #ef4444. Step 6 Constitutional Constraints Enforcement: CR-001 (ZERO trading signal access), CR-002 (expose contradictions), CR-003 (descriptive only). Continuing.

---

### TECH REF 144

Batch 1 ingested (lines 1-75). MCI Completion Roadmap: 95% Complete, 7 phases remaining, 3-4 weeks estimated. Tools: Claude, Claude Code, Cursor, GitHub, Vercel, Replit, Sentry. Phase 1 Environment Setup (2-3 days): Vercel Deployment with Vite framework, bun build, staging/production environment variables. Continuing.

---

### TECH REF 145

Batch 5 ingested (lines 300-374). Step 1.5 Test Local Environment: Backend (bun run server, port 3001), Frontend (bun run dev, port 5173). Expected outputs with Sentry initialization. Test token validation with [Out-of-Scope-Broker] Paper keys. Step 1.6 Push Configuration: git status verification (env files should be ignored), commit .gitignore and .env.example. Continuing.

---

### TECH REF 146

Batch 6 ingested (lines 375-449). Step 1.6 continued: Push to GitHub, verify CI Pipeline passes (~5 minutes). Step 1.7 Configure Vercel Environment Variables: Add backend env vars for staging (paper keys) and production (live keys), redeploy. Phase 1 Complete checklist. Continuing.

---

### TECH REF 147

Batch 7 ingested (lines 450-524). Phase 2 WebSocket Integration (4-5 days): Replace simulated data with real [Out-of-Scope-Broker] streams for positions, orders, market data. Step 2.1 Prototype in Replit: Create isolated test before modifying production. Node.js with ws package. [Out-of-Scope-Broker] WebSocket URL: wss://paper-api.[out-of-scope-broker].markets/stream. Authentication flow: connect â†’ send auth action with key/secret â†’ on success, subscribe to trade_updates. Continuing.

---

### TECH REF 148

Batch 8 ingested (lines 525-599). WebSocket test continued: error/close handlers, heartbeat every 30 seconds. Test trading events via paper-api.[out-of-scope-broker].markets. Troubleshooting: connection refused â†’ check keys, auth failed â†’ verify paper keys. Step 2.2 Design WebSocket Manager Architecture: Claude prompt for production-grade manager with exponential backoff (1sâ†’2sâ†’4sâ†’8sâ†’max 30s), multiple streams (trade_updates, account_updates), heartbeat, graceful shutdown, Zustand telemetryStore integration. Continuing.

---

### TECH REF 149

Batch 9 ingested (lines 600-674). Step 2.2 continued: WebSocketManager class design with methods (connect, disconnect, subscribe, handleMessage, reconnect, sendHeartbeat). Step 2.3 Generate WebSocket Manager with Claude Code: Create src/client/lib/websocketManager.ts (~300-400 lines), TypeScript strict mode, Sentry logging, JSDoc comments. Key methods to verify: constructor, connect, authenticate, subscribe, handleMessage, reconnect (exponential backoff), disconnect. Continuing.

---

### TECH REF 150

Batch 10 ingested (lines 675-749). Step 2.3 continued: Test compilation with bun run typecheck. Step 2.4 Integrate WebSocket with telemetryStore: Import WebSocketManager, add wsManager instance to store state, add methods (connectWebSocket, disconnectWebSocket, subscribeToStreams), add message handlers (handleTradeUpdate, handleAccountUpdate), register handlers with wsManager.on('message'). Cursor Cmd+K inline edit instructions. Continuing.

---
